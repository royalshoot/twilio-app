(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{gjKC:function(t,e,n){"use strict";n.r(e),n.d(e,"MessagingModule",function(){return z});var i=n("ofXK"),c=n("fXoL"),o=n("tyNb"),s=n("jIHw");const a=function(){return["/main"]},r=function(){return["/main/messaging/individual"]};let l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Db({type:t,selectors:[["app-messaging"]],decls:10,vars:4,consts:[[1,"dashboard-header"],[2,"color","#fff",3,"routerLink"],[1,"p-grid","dashboard-main"],[1,"p-col-6","p-offset-3"],[2,"margin-top","70px","text-align","center"],["pButton","","label","Individual Messaging",1,"p-button-lg",2,"padding","30px","margin","20px","font-size","20px",3,"routerLink"],["pButton","","label","Bulk Messaging",1,"p-button-lg","p-button-help",2,"padding","30px","margin","20px","font-size","20px"]],template:function(t,e){1&t&&(c.Nb(0,"div",0),c.Nb(1,"a",1),c.mc(2,"back"),c.Mb(),c.Mb(),c.Nb(3,"div",2),c.Nb(4,"div",3),c.Nb(5,"h2"),c.mc(6,"MESSAGING (customer service portal)"),c.Mb(),c.Nb(7,"div",4),c.Kb(8,"a",5),c.Kb(9,"a",6),c.Mb(),c.Mb(),c.Mb()),2&t&&(c.yb(1),c.bc("routerLink",c.cc(2,a)),c.yb(7),c.bc("routerLink",c.cc(3,r)))},directives:[o.b,s.a],styles:[".dashboard-header[_ngcontent-%COMP%]{text-align:right}.dashboard-main[_ngcontent-%COMP%]{margin-top:30vh}h2[_ngcontent-%COMP%]{text-align:center;color:#fff}"]}),t})();var b=n("lJxs"),d=n("tk/3"),g=n("vvsn");let p=(()=>{class t{static getAccountId(){return(new g.a).get("accountId")}static getHttpHeader(){return(new d.c).set("accountId",this.getAccountId())}}return t.baseUrl="http://localhost:5000/",t})(),h=(()=>{class t{constructor(t){this.http=t,this.http=t}getClients(){return this.http.get(p.baseUrl+"Client/GetAll",{headers:p.getHttpHeader()}).pipe(Object(b.a)(t=>t))}getMessages(t){return this.http.get(p.baseUrl+`Client/${t}/Messages/GetAll`,{headers:p.getHttpHeader()}).pipe(Object(b.a)(t=>t))}sendMessage(t){return this.http.post(p.baseUrl+"Message/Add",t,{headers:p.getHttpHeader()}).pipe(Object(b.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(d.a))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=n("YyRF"),m=n("7zfz");const f=["mask"];function _(t,e){1&t&&c.Lb(0)}const M=function(t){return{"p-blockui-document":t,"p-blockui p-component-overlay":!0}},v=function(t){return{display:t}},x=["*"];let k=(()=>{class t{constructor(t,e){this.el=t,this.cd=e,this.autoZIndex=!0,this.baseZIndex=0}get blocked(){return this._blocked}set blocked(t){this._blocked=t,this.mask&&this.mask.nativeElement&&(this._blocked?this.block():this.unblock())}ngAfterViewInit(){if(this.target&&!this.target.getBlockableElement)throw"Target of BlockUI must implement BlockableUI interface"}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template}})}block(){this.target?(this.target.getBlockableElement().appendChild(this.mask.nativeElement),this.target.getBlockableElement().style.position="relative"):document.body.appendChild(this.mask.nativeElement),this.autoZIndex&&(this.mask.nativeElement.style.zIndex=String(this.baseZIndex+ ++u.a.zindex))}unblock(){this.el.nativeElement.appendChild(this.mask.nativeElement)}ngOnDestroy(){this.unblock()}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(c.l),c.Jb(c.h))},t.\u0275cmp=c.Db({type:t,selectors:[["p-blockUI"]],contentQueries:function(t,e,n){if(1&t&&c.Cb(n,m.d,0),2&t){let t;c.gc(t=c.Vb())&&(e.templates=t)}},viewQuery:function(t,e){if(1&t&&c.pc(f,1),2&t){let t;c.gc(t=c.Vb())&&(e.mask=t.first)}},inputs:{autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",blocked:"blocked",target:"target",styleClass:"styleClass"},ngContentSelectors:x,decls:4,vars:9,consts:[[3,"ngClass","ngStyle"],["mask",""],[4,"ngTemplateOutlet"]],template:function(t,e){1&t&&(c.ac(),c.Nb(0,"div",0,1),c.Zb(2),c.lc(3,_,1,0,"ng-container",2),c.Mb()),2&t&&(c.Ab(e.styleClass),c.bc("ngClass",c.dc(5,M,!e.target))("ngStyle",c.dc(7,v,e.blocked?"flex":"none")),c.yb(3),c.bc("ngTemplateOutlet",e.contentTemplate))},directives:[i.i,i.l,i.m],styles:[".p-blockui{align-items:center;background-color:transparent;display:flex;height:100%;justify-content:center;left:0;top:0;transition-property:background-color;width:100%}.p-blockui,.p-blockui.p-component-overlay{position:absolute}.p-blockui-document.p-component-overlay{position:fixed}.p-blockui-leave.p-component-overlay{background-color:transparent}"],encapsulation:2,changeDetection:0}),t})(),C=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[i.b]]}),t})();function y(t,e){if(1&t){const t=c.Ob();c.Nb(0,"div",27),c.Ub("click",function(){c.ic(t);const n=e.$implicit;return c.Wb().tapClient(n)}),c.Nb(1,"div",28),c.Nb(2,"div",29),c.Kb(3,"img",30),c.Mb(),c.Nb(4,"div",31),c.Nb(5,"h5"),c.mc(6),c.Mb(),c.Nb(7,"p"),c.mc(8),c.Mb(),c.Mb(),c.Mb(),c.Mb()}if(2&t){const t=e.$implicit;c.Bb("active_chat",t.active),c.yb(6),c.nc(t.name),c.yb(2),c.nc(t.phoneNumber)}}function O(t,e){if(1&t&&(c.Nb(0,"div",34),c.Nb(1,"div",35),c.Kb(2,"img",30),c.Mb(),c.Nb(3,"div",36),c.Nb(4,"div",37),c.Nb(5,"p"),c.mc(6),c.Mb(),c.Nb(7,"span",38),c.mc(8),c.Xb(9,"date"),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t){const t=c.Wb().$implicit;c.yb(6),c.nc(t.body),c.yb(2),c.oc(" ",c.Yb(9,2,t.createdDate,"short"),"")}}function P(t,e){if(1&t&&(c.Nb(0,"div",39),c.Nb(1,"div",40),c.Nb(2,"p"),c.mc(3),c.Mb(),c.Nb(4,"span",38),c.mc(5),c.Xb(6,"date"),c.Mb(),c.Mb(),c.Mb()),2&t){const t=c.Wb().$implicit;c.yb(3),c.nc(t.body),c.yb(2),c.nc(c.Yb(6,2,t.createdDate,"short"))}}function w(t,e){if(1&t&&(c.Nb(0,"div"),c.lc(1,O,10,5,"div",32),c.lc(2,P,7,5,"div",33),c.Mb()),2&t){const t=e.$implicit;c.yb(1),c.bc("ngIf",2==t.messageTypeId),c.yb(1),c.bc("ngIf",1==t.messageTypeId)}}const N=function(){return["/main/messaging"]},I=[{path:"",component:l},{path:"individual",component:(()=>{class t{constructor(t){this.chatService=t,this.clients=[],this.messages=[],this.textMessage="",this.blocked=!1}ngOnInit(){this.getClients()}getClients(){this.blocked=!0,this.chatService.getClients().subscribe(t=>{this.blocked=!1,t.success&&(t.result.forEach(t=>{t.active=!1}),this.clients=t.result)})}tapClient(t){this.selectedClient=t.clientId,this.clients.forEach(t=>{t.active=!1}),this.clients.filter(e=>e.clientId==t.clientId)[0].active=!0,this.blocked=!0,this.chatService.getMessages(t.clientId).subscribe(t=>{this.blocked=!1,t.success&&(this.messages=t.result)})}sendMessage(t){if(t){let e={clientId:this.selectedClient,body:t.value};t.value="",this.blocked=!0,this.chatService.sendMessage(e).subscribe(t=>{this.blocked=!1,t.success&&this.messages.push(t.result)})}else alert("Please select any client to send message")}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(h))},t.\u0275cmp=c.Db({type:t,selectors:[["app-individual"]],decls:31,vars:5,consts:[[2,"text-align","right"],[2,"color","#fff",3,"routerLink"],[1,"container"],[1,"text-center",2,"color","#fff"],[1,"messaging"],[1,"inbox_msg"],[1,"inbox_people"],[1,"headind_srch"],[1,"recent_heading"],[1,"srch_bar"],[1,"stylish-input-group"],["type","text","placeholder","Search",1,"search-bar"],[1,"input-group-addon"],["type","button"],["aria-hidden","true",1,"fa","fa-search"],[1,"inbox_chat"],["class","chat_list active_chat",3,"active_chat","click",4,"ngFor","ngForOf"],[1,"mesgs"],[1,"msg_history"],[4,"ngFor","ngForOf"],[1,"type_msg"],[1,"input_msg_write"],["type","text","placeholder","Type a message",1,"write_msg"],["msg",""],["type","button",1,"msg_send_btn",3,"click"],["aria-hidden","true",1,"fa","fa-paper-plane-o"],[3,"blocked"],[1,"chat_list","active_chat",3,"click"],[1,"chat_people"],[1,"chat_img"],["src","https://ptetutorials.com/images/user-profile.png","alt","sunil"],[1,"chat_ib"],["class","incoming_msg",4,"ngIf"],["class","outgoing_msg",4,"ngIf"],[1,"incoming_msg"],[1,"incoming_msg_img"],[1,"received_msg"],[1,"received_withd_msg"],[1,"time_date"],[1,"outgoing_msg"],[1,"sent_msg"]],template:function(t,e){if(1&t){const t=c.Ob();c.Nb(0,"div",0),c.Nb(1,"a",1),c.mc(2,"back"),c.Mb(),c.Mb(),c.Nb(3,"div",2),c.Nb(4,"h2",3),c.mc(5,"Individual Messaging"),c.Mb(),c.Nb(6,"div",4),c.Nb(7,"div",5),c.Nb(8,"div",6),c.Nb(9,"div",7),c.Nb(10,"div",8),c.Nb(11,"h4"),c.mc(12,"Recent"),c.Mb(),c.Mb(),c.Nb(13,"div",9),c.Nb(14,"div",10),c.Kb(15,"input",11),c.Nb(16,"span",12),c.Nb(17,"button",13),c.Kb(18,"i",14),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(19,"div",15),c.lc(20,y,9,4,"div",16),c.Mb(),c.Mb(),c.Nb(21,"div",17),c.Nb(22,"div",18),c.lc(23,w,3,2,"div",19),c.Mb(),c.Nb(24,"div",20),c.Nb(25,"div",21),c.Kb(26,"input",22,23),c.Nb(28,"button",24),c.Ub("click",function(){c.ic(t);const n=c.hc(27);return e.sendMessage(n)}),c.Kb(29,"i",25),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Kb(30,"p-blockUI",26)}2&t&&(c.yb(1),c.bc("routerLink",c.cc(4,N)),c.yb(19),c.bc("ngForOf",e.clients),c.yb(3),c.bc("ngForOf",e.messages),c.yb(7),c.bc("blocked",e.blocked))},directives:[o.b,i.j,k,i.k],pipes:[i.d],styles:[".container[_ngcontent-%COMP%]{margin:auto}.container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{max-width:100%}.inbox_people[_ngcontent-%COMP%]{background:#f8f8f8 none repeat scroll 0 0;float:left;overflow:hidden;width:40%;border-right:1px solid #c4c4c4}.inbox_msg[_ngcontent-%COMP%]{border:1px solid #c4c4c4;clear:both;overflow:hidden;background-color:#fff}.top_spac[_ngcontent-%COMP%]{margin:20px 0 0}.recent_heading[_ngcontent-%COMP%]{float:left;width:40%}.srch_bar[_ngcontent-%COMP%]{display:inline-block;text-align:right;width:60%}.headind_srch[_ngcontent-%COMP%]{padding:10px 29px 10px 20px;overflow:hidden;border-bottom:1px solid #c4c4c4}.recent_heading[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#05728f;font-size:21px;margin:auto}.srch_bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:solid #cdcdcd;border-width:0 0 1px;width:80%;padding:2px 0 4px 6px;background:none}.srch_bar[_ngcontent-%COMP%]   .input-group-addon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent none repeat scroll 0 0;border:none;padding:0;color:#707070;font-size:18px}.srch_bar[_ngcontent-%COMP%]   .input-group-addon[_ngcontent-%COMP%]{margin:0 0 0 -27px}.chat_ib[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:15px;color:#464646;margin:0 0 8px}.chat_ib[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;float:right}.chat_ib[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#989898;margin:auto}.chat_img[_ngcontent-%COMP%]{float:left;width:11%}.chat_ib[_ngcontent-%COMP%]{float:left;padding:0 0 0 15px;width:88%}.chat_people[_ngcontent-%COMP%]{overflow:hidden;clear:both}.chat_list[_ngcontent-%COMP%]{border-bottom:1px solid #c4c4c4;margin:0;padding:18px 16px 10px}.inbox_chat[_ngcontent-%COMP%]{overflow-y:scroll}.active_chat[_ngcontent-%COMP%]{background:#ebebeb}.incoming_msg_img[_ngcontent-%COMP%]{display:inline-block;width:6%}.received_msg[_ngcontent-%COMP%]{display:inline-block;padding:0 0 0 10px;vertical-align:top;width:92%}.received_withd_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#ebebeb none repeat scroll 0 0;border-radius:3px;color:#646464;font-size:14px;margin:0;padding:5px 10px 5px 12px;width:100%}.time_date[_ngcontent-%COMP%]{color:#fff;display:block;font-size:12px;margin:8px 0 0}.received_withd_msg[_ngcontent-%COMP%]{width:57%}.mesgs[_ngcontent-%COMP%]{float:left;padding:30px 15px 0 25px;width:60%}.sent_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border-radius:3px;font-size:14px;margin:0;color:#fff;padding:5px 10px 5px 12px;width:100%}.outgoing_msg[_ngcontent-%COMP%]{overflow:hidden;margin:26px 0}.sent_msg[_ngcontent-%COMP%]{float:right;width:46%}.input_msg_write[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent none repeat scroll 0 0;border:none;color:#4c4c4c;font-size:15px;min-height:48px;width:100%}.type_msg[_ngcontent-%COMP%]{border-top:1px solid #c4c4c4;position:relative}.msg_send_btn[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border:none;border-radius:50%;color:#fff;cursor:pointer;font-size:17px;height:33px;position:absolute;right:0;top:11px;width:33px}.messaging[_ngcontent-%COMP%]{padding:0 0 50px}.msg_history[_ngcontent-%COMP%]{height:80vh;overflow-y:auto}.write_msg[_ngcontent-%COMP%], .write_msg[_ngcontent-%COMP%]::placeholder{color:#fff}"]}),t})()}];let z=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},providers:[h],imports:[[i.b,s.b,C,o.c.forChild(I)]]}),t})()}}]);